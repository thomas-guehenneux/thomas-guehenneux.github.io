---
import GreyLogo from '@/assets/ml-logo-grey.png'
import YellowLogo from '@/assets/ml-logo-yellow.png'
import { LanguageToggle } from '@/components/LanguageToggle'
import { ModeToggle } from '@/components/ModeToggle'
import { type Locales } from '@/types/i18n'
import { Picture } from 'astro:assets'
import { getRelativeLocaleUrl } from 'astro:i18n'

interface Props {
  availableLocales: Locales[]
  lang: Locales
}

const { availableLocales, lang } = Astro.props
const enPath = getRelativeLocaleUrl('en', Astro.url.pathname)
const jaPath = getRelativeLocaleUrl('ja', Astro.url.pathname)
const enTopPath = getRelativeLocaleUrl('en', '/')
const jaTopPath = getRelativeLocaleUrl('ja', '/')
const currentLocaleTopPath = getRelativeLocaleUrl(lang, '/')
---

<header
  class="sticky top-0 z-50 w-full border-b border-slate-200 bg-background backdrop-blur supports-[backdrop-filter]:bg-background/60"
>
  <div class="container flex h-16 max-w-5xl items-center justify-between">
    <a href={currentLocaleTopPath}>
      <Picture class="h-4 w-auto max-w-[180px] dark:hidden" src={GreyLogo} alt="Monstar lab" />
      <Picture class="hidden h-4 w-auto max-w-[180px] dark:block" src={YellowLogo} alt="Monstar lab" />
    </a>
    <div>
      <ModeToggle client:load />
      <LanguageToggle client:load {enPath} {jaPath} {availableLocales} {lang} {enTopPath} {jaTopPath} />
    </div>
  </div>
</header>
